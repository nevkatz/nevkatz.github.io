<!DOCTYPE html>
<html lang="en"><!-- http://jovandeginste.github.io/2016/05/18/add-metadata-tags-to-jekyll-blog-posts.html   -->
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-146443473-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-146443473-1');
</script>
<script data-ad-client="ca-pub-9580495616409314" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:url" content="/2021/03/06/drupal-migration-takeaways.html" />
  
  <meta itemprop="keywords" content="web,database">
  

  
  <meta itemprop="tags" content="web,database">
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>14 Tips Drupal Database Migrations | Nevin Katz</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="14 Tips Drupal Database Migrations" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Background" />
<meta property="og:description" content="Background" />
<link rel="canonical" href="/2021/03/06/drupal-migration-takeaways.html" />
<meta property="og:url" content="/2021/03/06/drupal-migration-takeaways.html" />
<meta property="og:site_name" content="Nevin Katz" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-06T00:00:00-05:00" />
<script type="application/ld+json">
{"headline":"14 Tips Drupal Database Migrations","dateModified":"2021-03-06T00:00:00-05:00","datePublished":"2021-03-06T00:00:00-05:00","url":"/2021/03/06/drupal-migration-takeaways.html","mainEntityOfPage":{"@type":"WebPage","@id":"/2021/03/06/drupal-migration-takeaways.html"},"description":"Background","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- this is where the CSS is. -->
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/css/prism.css">
  <link rel="stylesheet" href="/assets/css/styles.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Nevin Katz" /></head>
<body data-title="14 Tips Drupal Database Migrations" ><header class="site-header" role="banner">

  <div class="wrapper"><div id="header-logo">
    <a class="site-title" rel="author" href="/">
      Nevin Katz
    </a>
    <a class="site-subtitle" rel="title" href="/">
      Web &amp; App Developer</a>
    </div><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <!--<a class="page-link" href="/404.html">Page Not Found</a><a class="page-link" href="/about/">About</a><a class="page-link" href="/tag/animation/">Animation</a><a class="page-link" href="/tag/arrays/">Arrays</a><a class="page-link" href="/tag/async/">Async Requests</a><a class="page-link" href="/tag/cli/">cli (Command Line Interface)</a><a class="page-link" href="/tag/cms/">CMS (Content Management System)</a><a class="page-link" href="/tag/comics/">Comics</a><a class="page-link" href="/tag/css-grid/">CSS Grid</a><a class="page-link" href="/tag/css-styles/">CSS</a><a class="page-link" href="/tag/database/">Database</a><a class="page-link" href="/tag/docs/">Documentation</a><a class="page-link" href="/tag/drupal-cms/">Drupal CMS</a><a class="page-link" href="/tag/edtech/">CSS Grid</a><a class="page-link" href="/tag/flexbox/">Flexbox</a><a class="page-link" href="/tag/html/">HTML</a><a class="page-link" href="/tag/images/">Images</a><a class="page-link" href="/tag/io/">I/O (Input / Output)</a><a class="page-link" href="/tag/mobile/">Mobile</a><a class="page-link" href="/project-management/">Project Management</a><a class="page-link" href="/tag/qa/">QA (Quality Assurance)</a><a class="page-link" href="/tag/static/">Static</a><a class="page-link" href="/tag/themes/">Themes</a><a class="page-link" href="/tag/web/">Web</a><a class="page-link" href="/index.html">Nevin Katz</a><a class="page-link" href="/index.html">Nevin Katz</a>-->
           <div id="top-nav"><a class="page-link" href="/about">About</a></div>
           <div id="search-container">
                 <input type="text" id="search-input" placeholder="Search">
                 <!-- search results container - maybe put elsewhere -->
           </div>
        </div>
      </nav></div>
  <div class="category-nav" id="top-category-nav">
        <ul>
          <li><a class="css" href="/category/css">CSS</a></li>
          <li><a class="css" href="/category/svg">SVG</a></li>
          <li><a class="javascript" href="/category/javascript">Javascript</a></li>
          <li><a class="vue" href="/category/vue">Vue</a></li>
          <li><a class="nodejs" href="/category/nodejs">Node JS</a></li>
          <li><a class="drupal" href="/category/drupal">Drupal</a></li>
        </ul>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <ul id="results-container"></ul>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">14 Tips Drupal Database Migrations</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-03-06T00:00:00-05:00" itemprop="datePublished">Mar 6, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h3 id="background">Background</h3>

<p>Perhaps you have built your share of Drupal 7 sites or have inherited a few. You feel the end-of-life date of Drupal 7 looming in November 2022, and you don’t want that to mean the end of your D7 sites. While starting a new D9 site from scratch is an option, you know that re-creating all that contnet will be a time sync, and it would sure be better to migrate your databaes to Drupal 9. While enlisting help from the outside carries with it cost and overhead, the prospect of doing it yourself seems daunting.</p>

<p>As someone who initially felt this way, I wanted to share with you a few tips I gleaned from migrating my Drupal site database to Drupal 9, using these <a href="https://www.drupal.org/docs/upgrading-drupal/upgrade-using-web-browser)" target="_blank">Drupal migration docs</a> as a guide and Drupal 9’s native migration modules.</p>

<h3 id="14-tips">14 Tips</h3>

<ol>
  <li>
    <p><strong>In most cases, migrate directly to 9.</strong> Drupal 8 loses support in November 2021, and Drupal 9 is very similar to Drupal 9 - just more streamlined with fewer modules that are ready. While migrating from 8 to 9 is less of a challenge, it can still be daunting if your Drupal 8 site has deprecated modules or APIs. Migrating directly to 9 will save you a second significant upgrade.</p>
  </li>
  <li>
    <p><strong>Try your migration locally first.</strong> I found it easiest to migrate my sites locally using the command line. I didn’t need to log into a server and found it easier to control the file system using a GUI or the command line - whatever was most convenient.</p>
  </li>
  <li>
    <p><strong>Try migrating with Lando.</strong> <a href="https://lando.dev/" target="_blank">Lando</a> is a free command-line tool for setting a range of dev environments that uses <a href="https://www.docker.com/" target="_blank">Docker</a> as its container. It sets up your settings.php file automagically with initial username, password, and database name that are easy to remember and find — using either <code>lando info</code> or docker. The <code>.lando.yml</code> file did not need any special configuration. I set up both my D7 and D9 sites with Lando, and once I used <code>lando info</code> to grab the hostname and database credentials, connecting my D9 site to the D7 site went off without a hitch.</p>
  </li>
  <li>
    <p><strong>Use Git to version control your work.</strong> I have both my old and new site wired to a Git repository, and use a .gitignore file to block out the usual files that I don’t want my local and remote sites to share. For me, these include <code>settings.php</code>, the <code>files</code> directory, and the notorious <code>.DS_Store</code> files that auto populate on a Mac.</p>
  </li>
  <li>
    <p><strong>Become familiar with Drupal 9’s environment requirements.</strong> For instance, you’ll see from these <a href="https://www.drupal.org/docs/understanding-drupal/how-drupal-9-was-made-and-what-is-included/environment-requirements-of" target="_blank">Drupal docs</a> that Drupal requires PHP 7.3 and Apache 2.4.7. Lando will configure your PHP automatically, but other local setup tools may not.</p>
  </li>
  <li>
    <p><strong>Use the Drupal 9 migration modules.</strong> In <code>Extent</code>, turn on all the Migration modules. Once they are on, go to <code>sitename/upgrade</code> to get started.</p>
  </li>
  <li>
    <p><strong>Use a Drupal 9 database that is as close as possible to a starter database.</strong> No content, no content types, no taxonomy, and CERTAINLY no views. Only turn on the modules you’ll need. I turned on <strong>entity</strong> and the Drupal migration modules.</p>
  </li>
  <li>
    <p><strong>Double-check your database credentials and files location.</strong> You will need to enter these on the second migration screen. Again, you can access these with <code>lando info</code> if you go that route.</p>
  </li>
  <li>
    <p><strong>Download the Drupal 9 modules you need but only turn on the ones that have upgrade paths.</strong> I have found that turning on ones I do not immediately need can cause issues.</p>
  </li>
  <li>
    <p>Be wary of turning on D9 alpha or beta modules before the migration. If you need to turn on contrib modules besides the migration ones, I recommend keeping your <code>composer.json</code> minimum version set to <code>stable</code> for the migration, as alpha or beta releases can have unintended consequences during the migration process.</p>
  </li>
  <li>
    <p><strong>Turn off as many D7 modules as you can that will not be upgraded.</strong> After you connect to your D7 database, you will be provided with a list of D7 modules that will not be upgraded. While it is best to either turn these modules off, some of them, like the video module, can be stubborn about being disabled. For these, I deleting the associated fields or other site assets may help you to prevent migration errors.</p>
  </li>
  <li>
    <p><strong>Make database backups frequently.</strong> Chances are, you will want to run your migration multiple times. For each time that represents a milestone, make a database backup. You can do this using <code>lando db-export &lt;databasepath&gt;</code> at the root of your site.</p>
  </li>
  <li>
    <p><strong>Develop strategies for content that may not automatically move over.</strong> For me, this included content handled by the <strong>field collection</strong> and <strong>video</strong> modules. This is where you may want to try running bulk operations or custom scripts for copying content into other D7 fields that migrate successfully.</p>
  </li>
  <li>
    <p><strong>Be ready to build!</strong> Don’t expect layouts and views to move over, and anticipate rebuilding your theme. Remember, migrating the database is just the first step. After you successfully migrate, you will have to rebuild the front-end and configurations. This is a great opportunity to consider what parts of your theme and site architecture may be ready for updates.</p>
  </li>
</ol>

<h3 id="final-thoughts">Final thoughts</h3>

<p>At the time of this post, I am no specialist at Drupal database migrations. And that’s why I think this list of takeaways might be helpful. The experts already have their database migration routines down, but since my time has been mainly focused on front-end web development and Android apps in recent years, I am one of the Drupal developer who is still figuring stuff out.</p>

<p>Thanks for reading, and I hope these tips help with your Drupal migrations.</p>

<!--For so long, Drupal database migrations have felt like arcane sorcery that I did not want to go near. It was the one step in a migration that felt like a gap in my skill set. But after a colleague of mine pulled one off, I wanted to try it. After a number of attempts, I emerged with a successfully migrated Drupal database.-->

  </div><a class="u-url" href="/2021/03/06/drupal-migration-takeaways.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  
  <data class="u-url" href="/"></data>

  <div class="wrapper">

 

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <h2 id="footer-heading">Nevin Katz</h2>
        <h2 id="footer-subheading">Web &amp; App Developer</h2>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/nevkatz"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">nevkatz</span></a></li><li><a href="https://www.linkedin.com/in/nevin-katz-7744244"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">nevin-katz-7744244</span></a></li><li><a href="https://www.twitter.com/nevkatz"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">nevkatz</span></a></li></ul>
<a class="u-email" href="mailto:nevkatz@gmail.com">nevkatz@gmail.com
            </a>
  
      </div>  
    </div>
   

  </div>
   <div id="copyright">
    <p>Copyright &copy; 2021 Nevin Katz. All Rights Reserved.</p>
   </div>

</footer>
<script src="/assets/js/simple-jekyll-search.min.js"></script>
<script src="/assets/js/prism.js"></script>
<script src="/assets/js/script.js"></script>



</body>

</html>
